# Auto-Park
### Участники проекта
Студенты группы М8О-114СВ-24
* Красавин Максим
* Никитин Кирилл
* Прохоров Данила

### Стек используемых технологий
* IDE: PyCharm 2024.3
* ML: Python 3.12, библиотека sklearn
* Backend: Django
* Database: Oracle Apex

## Постановка задачи
Разработайте систему обслуживания и администрирования таксопарка.
Описание задачи: Владельцам таксопарка не позавидуешь. У них большой парк автомодилей разных марок, выпуска пробега, и они закреплены за разными водителями. Иногда за всеми машинами можно не уследить. Но, понимая, что процесс обслуживания автомобилей можно соптимизировать, например заранее узнать, что выйдет из строя, и через какое количество км, они могут построить оптимальный план график всего автопарка и снизить число недовольных клиентов и водителей. Ваша задача помочь в их желании, написав систему аудита автомобилей их пробега, пользовательских рейтингов за поездку, сбора параметров поездки и построением оптимального плана обслуживания автомобилей. Естественно, чтобы строить планы вам необходимо обучить оптимально модели машинного обучения, чтобы предсказывать желаемые величины. Ваша задача делать это максимально хорошо, чтобы минимизировать дополнительные издержки. Реализуйте dashboard с агрегированной информацией по каждому автомобилю и водителю, чтобы видеть, кого можно штрафовать за неаккуратную езду!
## ML
Первым этапом работы являлось создание подходящих датасетов для имитации данных о реальных автомобилях, поездках и водителях
Для решения этой задачи было проделано:
1. найден в открытом доступе подходящий датасет, на основе которого были созданы три новых: 
	1.1. с автомобилями и характерными признаками для предиктивного обслуживания
	1.2. с поездками, в котором было сгенерировано 10 водителей и информация о поездках (авто, протяженность, дата и оценка) 
	1.3. с водителями (ФИО, возраст и стаж вождения)
2. обучить модель регрессии, которая будет прогнозировать дату следующего планируемого обслуживания автомобиля

В качестве наиболее подходящего, на наш взгляд, датасета, мы выбрали датасет [Vehicle Maintenance Data](https://www.kaggle.com/datasets/chavindudulaj/vehicle-maintenance-data) (данные об обслуживании техники): 
Для обучения модели по нему мы написали код, который выделяет из исходного датасета только определенные данные:
1. отобраны записи только для типа техники cars (нас не интересуют автобусы, мотоциклы и пр.)
2. выделено 11 основных признаков (пробег, возраст авто, количество зафиксированных проблем с авто, состояние мотора и др.), которые важны для предсказания даты обслуживания и целевая переменная – кол-во дней с момента последнего обслуживания
	
 	2.1. на основе этих данных мы обучили модель Random Forest Regressor и спрогнозировали дату следующего обслуживания для автомобилей
	
 	2.2. добавив случайный идентификатор в виде Российского госномера и выделив только 100 случайных автомобилей из обработанных данных исходного датасета мы получили датасет cars, который сохраняется программой в формате csv
3. для поездок мы сгенерировали 10 водителей, которым присвоили свой идентификатор, мы предположили, что для каждой поездки водитель берет случайный автомобиль, для каждой поездке мы сгенерировали синтетические данные:
	
 	3.1. длину поездки (от 1 до 30 км)
	
 	3.2. дату поездки (случайная в течение всего 2024 года)
	
 	3.3 рейтинг поездки (от 1 до 5, при это 4-5 встречаются в рейтинге чаще, у нас опытные и аккуратные водители)

	Этот датасет у нас сохраняется под именем trips

4. для водителей мы просто сгенерировали каждому случайное имя, возраст (от 20 до 55 лет) и стаж (от 1 до 40 лет) и сохранили этот датасет под именем drivers

## Бэкенд
Для написания приложения был выбран фреймворк Django ввиду его относительной простоты, потому как опыта работы с веб-фреймворком не было

Были созданы 3 модели, соответствующие описанным в разделе ML таблицам автомобилей, водителей и поездок. При этом таблица поездок имеет 2 внешних ключа, ссылающихся на ключевые поля таблиц автомобилей и водителей. Здесь реализовано каскадное удаление - то есть если удаляется автомобиль или водитель, то автоматически удаляются и все поездки, в которых он участвовал

В качестве базы данных используетя SQLite, так как в отличие, например, от той же Postgres, она не ребует предварительного ручного создания пользователя и базы данных. Здесь упор был сделан именно на простоту

В соответствующих разделах на сайте можно перейти по ссылкам, чтобы увидеть данные из моделей Django, отображающиеся в виде таблиц. Каждую строку в данных можно рассмотреть подробнее с помощью кнопки, расположенной слева от строки. Нажмя на неё можно перейти на страницу, соответсвующую этому объекту и увидеть все поля данного объекта (это актуально для таблицы автомобилей, где нет возможности отобразить все столбцы, так как таблица получится слишком широкой). Также на этой странице присутствует возможность либо редактировать, либо удалить данный объект. Если это страница соответствует объекту, описывающему автомобиль, то вверху дополнительно ещё выводится предсказываемое моделью машинного обучения количество дней, через которое надо провести следующее ТО

При этом следует отметить, что для того, чтобы создать поездку, нужно, чтобы идентификаторы водителя и автомобиля уже сущестовали в своих таблицах, иначе выведется предупреждение о том, что форма добавления заполнена некорректно

На страницах, отображающих датасеты, есть кнопки, нажав на которые, можно перейти на отдельные страницы и скачать соответствующие датасеты в одном из следующих форматов (пользователь сам его выбирает):

- txt
- xls
- csv
- json

Последняя опция приложения - переход в панель администратора, что можно сделать, нажав на соответствующую иконку слева

- Логин - `admin`
- Пароль - `12345`

Для запуска приложения нужно склонировать репозиторий и прописать следующие команды в терминале из директории cars:

- `pip install -r requirements.txt` - установка нужных версий библиотек для виртуального окружения
- `pip manage.py makemigrations` - создание миграций
- `pip manage.py migrate` - запуск миграций
- `pip manage.py load_data` - вставка данных из датасетов, описанных в разделе ML, в сгенерированные модели
- `pip manage.py runserver` - запуск локального сервера

После запуска выведется ссылка, нажав на которую, на локалхосте пднимется локальный сервер

Чтобы останоить работы приложения, надо в терминале нажать Ctrl+C
